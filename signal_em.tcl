setenv DISPLAY vnc1:13
     
source rm_setup/icc_setup.tcl

set_app_var target_library  "$TARGET_LIBRARY_FILES $TARGET_PR_LIBRARY_FILES"

set_app_var link_library { * tcbn28hpcplusbwp12t30p140ffg0p88v0p99v125c_ccs.db  tcbn28hpcplusbwp12t30p140ffg0p99v0p88v125c_ccs.db  tcbn28hpcplusbwp12t30p140ffg0p99v0p99v125c_ccs.db  tcbn28hpcplusbwp12t30p140ffg0p99v125c_ccs.db   tcbn28hpcplusbwp12t30p140ffg0p99v1p05v125c_ccs.db  tcbn28hpcplusbwp12t30p140ffg1p05v0p99v125c_ccs.db  tcbn28hpcplusbwp12t30p140hvtffg0p88v0p99v125c_ccs.db  tcbn28hpcplusbwp12t30p140hvtffg0p99v0p88v125c_ccs.db  tcbn28hpcplusbwp12t30p140hvtffg0p99v0p99v125c_ccs.db  tcbn28hpcplusbwp12t30p140hvtffg0p99v125c_ccs.db  tcbn28hpcplusbwp12t30p140hvtffg0p99v1p05v125c_ccs.db  tcbn28hpcplusbwp12t30p140hvtffg1p05v0p99v125c_ccs.db  tcbn28hpcplusbwp12t30p140lvtffg0p88v0p99v125c_ccs.db  tcbn28hpcplusbwp12t30p140lvtffg0p99v0p88v125c_ccs.db  tcbn28hpcplusbwp12t30p140lvtffg0p99v0p99v125c_ccs.db  tcbn28hpcplusbwp12t30p140lvtffg0p99v125c_ccs.db   tcbn28hpcplusbwp12t30p140lvtffg0p99v1p05v125c_ccs.db  tcbn28hpcplusbwp12t30p140lvtffg1p05v0p99v125c_ccs.db  tef28hpcp128x32hd18_phrm_120a_ffg0p99v1p98v125c.db  tef28hpcp16x32hd18_phrm_130a_ffg0p99v1p98v125c.db   tef28hpcp256x32hd18_phrm_120a_ffg0p99v1p98v125c.db   tef28hpcp32x32hd18_phrm_120a_ffg0p99v1p98v125c.db  tef28hpcp64x32hd18_phrm_120a_ffg0p99v1p98v125c.db  tef28hpcpesd_p_120a_ffg0p99v1p98v125c.db   tphn28hpcpgv18ffg0p99v1p98v125c.db dwc_xaui6g_pads_x1_ns_9m6x2z_ffg0p99v125c_cbest.db  dwc_xaui6g_x1_ns_9m6x2z_ffg0p99v125c_cbest.db  sad2lsph4s1p1024x144m4b1w0c1p1d0r1s10_arp_ffgbc0p99v125c.db  sad2lsph4s1p2048x144m4b4w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sad2lsph4s1p4096x39m8b2w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sad2lsph4s1p8192x39m8b8w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p1024x144m2b2w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p1024x18m4b2w0c0p1d0r1s10_ppi_ffgbc0p99v125c.db  sadglsph4s1p1024x39m4b1w0c0p1d0r1s10_arp_ffgbc0p99v125c.db  sadglsph4s1p1024x39m4b1w0c0p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p1024x56m4b1w0c0p1d0r1s10_arp_ffgbc0p99v125c.db  sadglsph4s1p128x144m2b1w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p128x39m4b1w0c0p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p128x50m2b1w0c0p1d0r1s10_ppi_ffgbc0p99v125c.db  sadglsph4s1p128x56m2b1w0c0p1d0r1s10_ppi_ffgbc0p99v125c.db  sadglsph4s1p16x144m2b1w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p2048x39m4b2w0c0p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p256x144m2b1w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p256x39m4b1w0c0p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p256x50m2b1w0c0p1d0r1s10_ppi_ffgbc0p99v125c.db  sadglsph4s1p256x56m2b2w0c0p1d0r1s10_ppi_ffgbc0p99v125c.db  sadglsph4s1p32x144m2b1w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p32x144m2b1w0c1p1d0r1s10_ppi_ffgbc0p99v125c.db  sadglsph4s1p32x18m2b1w0c0p1d0r1s10_ppi_ffgbc0p99v125c.db  sadglsph4s1p32x39m4b1w0c0p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p512x144m2b1w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p512x144m2b2w0c1p1d0r1s10_arp_ffgbc0p99v125c.db  sadglsph4s1p512x39m4b1w0c0p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p512x39m4b1w0c1p1d0r1s10_arp_ffgbc0p99v125c.db  sadglsph4s1p512x50m4b1w0c0p1d0r1s10_ppi_ffgbc0p99v125c.db  sadglsph4s1p512x56m2b2w0c0p1d0r1s10_arp_ffgbc0p99v125c.db  sadglsph4s1p512x56m2b2w0c0p1d0r1s10_ppi_ffgbc0p99v125c.db  sadglsph4s1p64x144m2b1w0c1p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s1p64x39m4b1w0c0p1d0r1s10_pipe_ffgbc0p99v125c.db  sadglsph4s2p128x80m1b4w0c0p1d0r1s10_ethrx_ffgbc0p99v125c.db  sadglsph4s2p16x26m2b1w0c0p1d0r1s10_sw_ffgbc0p99v125c.db  sadglsph4s2p32x148m1b1w0c1p1d0r1s10_ethrx_ffgbc0p99v125c.db  sadglsph4s2p32x152m1b1w0c1p1d0r1s10_sw_ffgbc0p99v125c.db  sadglsph4s2p32x164m1b1w0c1p1d0r1s10_sw_ffgbc0p99v125c.db  sadglsph4s2p32x180m1b1w0c1p1d0r1s10_ethrx_ffgbc0p99v125c.db  sadulsph4s2p1024x144m4b4w0c1p1d0r1s10_ppi_ffgbc0p99v125c.db  sadulsph4s2p11264x18m16b4w0c1p1d0r1s10_re_ffgbc0p99v125c.db  sadulsph4s2p16384x18m16b8w0c1p1d0r1s10_re_ffgbc0p99v125c.db  sadulsph4s2p2048x20m8b1w0c0p1d0r1s10_sw_ffgbc0p99v125c.db  sadulsph4s2p2048x22m8b1w0c0p1d0r1s10_sw_ffgbc0p99v125c.db  sadulsph4s2p4096x76m8b4w0c1p1d0r1s10_sw_ffgbc0p99v125c.db  sadulsph4s2p64x151m4b1w0c1p1d0r1s10_sw_ffgbc0p99v125c.db  sadulsph4s2p768x144m4b2w0c1p1d0r1s10_ppi_ffgbc0p99v125c.db  sadulsph4s2p8192x20m16b2w0c1p1d0r1s10_sw_ffgbc0p99v125c.db  sadulsph4s2p8192x26m16b2w0c1p1d0r1s10_sw_ffgbc0p99v125c.db  sasrlsph4s1p64x72m2b1w0c1p1d0r1s10_txrx_fast_ffgbc0p99v125c.db  sasslsph4s1p16384x31m16b4w0c1p1d0r1s10_pipe_fast_ffgbc0p99v125c.db  sasslsph4s1p16384x39m16b4w0c1p1d0r1s10_pipe_fast_ffgbc0p99v125c.db  sasslsph4s1p16384x72m16b4w0c1p1d0r1s10_pipe_fast_ffgbc0p99v125c.db   sasslsph4s1p4096x144m8b2w0c1p1d0r1s10_pipe_fast_ffgbc0p99v125c.db  sasslsph4s1p8192x144m8b4w0c1p1d0r1s10_pipe_fast_ffgbc0p99v125c.db}

set_mw_technology_file -alf $EM_DIR/tsmcn28_9lm6X2ZUTRDL.alf    ${DESIGN_NAME}_LIB

open_mw_lib ${DESIGN_NAME}_LIB
open_mw_cel $DESIGN_NAME
remove_attribute [current_design] local_link_library

set_active_scenarios func_ffg0p99v125c_power

link -force

save_mw_cel

remove_case_analysis -all

#extract_rc -coupling_cap

read_parasitics -format sbpf  $DESIGN_NAME.sbpf -keep_capacitive_coupling

set_switching_activity -toggle_rate 0.15 -static_probability 0.25 [get_nets -hier *] 
propagate_switching_activity

report_signal_em -violated -verbose > signal_em.rpt

#fix_signal_em

#close_mw_cel
#close_mw_lib

#exit

